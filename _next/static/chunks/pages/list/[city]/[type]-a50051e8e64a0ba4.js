(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{373:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list/[city]/[type]",function(){return n(7247)}])},7247:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return m},default:function(){return _type_}});var r=n(1527),s=n(429),l=n.n(s),i=n(8470),a=n.n(i),o=n(959);function getWebsiteCell(e){let t=e.tags.website;return t?(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:new URL(t).hostname}):null}function getEditCell(e){return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)("a",{href:"https://www.openstreetmap.org/".concat(e.type,"/").concat(e.osm_id),target:"_blank",rel:"noreferrer",children:"\uD83D\uDDFA"}),(0,r.jsx)("a",{href:"https://www.openstreetmap.org/edit?".concat(e.type,"=").concat(e.osm_id),target:"_blank",rel:"noreferrer",children:"✍️"})]})}function getStreetCell(e){return"".concat(e.tags["addr:street"]||""," ").concat(e.tags["addr:housenumber"]||"")}function getCityCell(e){return e.tags["addr:postcode"]}function getOpeningCell(e){if(!e.tags.opening_hours)return null;try{let t=new(a())(e.tags.opening_hours,{lat:parseInt(e.lat,10),lon:parseInt(e.lon,10),address:{country_code:"be",state:""}}),n=t.getStateString();if("open"===n)return(0,r.jsx)("span",{className:"opening open",children:"Ouvert"});if(["closed","close"].includes(n))return(0,r.jsx)("span",{className:"opening closed",children:"Ferm\xe9"})}catch(e){return console.warn(e),null}}var Components_GenericList=function(e){let{items:t,withOpening:n=!1}=e;return(0,r.jsxs)("table",{className:"table-fill",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"Nom"}),(0,r.jsx)("th",{children:"Adresse"}),(0,r.jsx)("th",{children:"CP"}),(0,r.jsx)("th",{children:"Web"}),n?(0,r.jsx)("th",{children:"Ouvert ?"}):null]})}),(0,r.jsx)("tbody",{children:t.map(e=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:getEditCell(e)}),(0,r.jsx)("td",{children:null===(t=e.tags)||void 0===t?void 0:t.name}),(0,r.jsx)("td",{children:getStreetCell(e)}),(0,r.jsx)("td",{children:getCityCell(e)}),(0,r.jsx)("td",{children:getWebsiteCell(e)}),n?(0,r.jsx)("td",{children:getOpeningCell(e)}):null]},e.osm_id)})})]})};let c={elementary:"Maternelle",primary:"Primaire",secondary:"Secondaire",0:"Maternelle",1:"Primaire",2:"Secondaire",3:"Secondaire Sup\xe9rieur"};var Components_SchoolList=function(e){let{items:t}=e;return(0,r.jsxs)("table",{className:"table-fill",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"Nom"}),(0,r.jsx)("th",{children:"Adresse"}),(0,r.jsx)("th",{children:"CP"}),(0,r.jsx)("th",{children:"Niveau"}),(0,r.jsx)("th",{children:"Web"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>{var t;let n=null===(t=e.tags["ref:fase"])||void 0===t?void 0:t.split("/")[0];return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:getEditCell(e)}),(0,r.jsxs)("td",{children:[e.tags.name,e.tags["ref:fase"]&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)("a",{href:"http://www.enseignement.be/index.php?page=24797&etab_id=".concat(n),className:"text-muted",children:["Fase: ",e.tags["ref:fase"]]})]})]}),(0,r.jsx)("td",{children:getStreetCell(e)}),(0,r.jsx)("td",{children:getCityCell(e)}),(0,r.jsx)("td",{children:function(e){let t=e.tags.school||e.tags["isced:level"];if(t)return t.split(";").map(e=>{var t;return(0,r.jsx)("span",{className:"tag",children:null!==(t=c[e])&&void 0!==t?t:e},"level")})}(e)}),(0,r.jsx)("td",{children:getWebsiteCell(e)})]},e.osm_id)})})]})},Components_RestaurantList=function(e){let{items:t}=e;return(0,r.jsxs)("table",{className:"table-fill",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"Nom"}),(0,r.jsx)("th",{children:"Adresse"}),(0,r.jsx)("th",{children:"CP"}),(0,r.jsx)("th",{children:"Web"}),(0,r.jsx)("th",{children:"Cuisine"}),(0,r.jsx)("th",{children:"Ouvert ?"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:getEditCell(e)}),(0,r.jsx)("td",{children:null===(t=e.tags)||void 0===t?void 0:t.name}),(0,r.jsx)("td",{children:getStreetCell(e)}),(0,r.jsx)("td",{children:getCityCell(e)}),(0,r.jsx)("td",{children:getWebsiteCell(e)}),(0,r.jsx)("td",{children:function(e){let t=e.tags.cuisine;return t?t.split(";").map(e=>(0,r.jsx)("span",{className:"tag",children:e},"cuisine")):null}(e)}),(0,r.jsx)("td",{children:getOpeningCell(e)})]},e.osm_id)})})]})},d=n(2082),h=n.n(d);n(2129);var Components_Map=e=>{let{items:t,initialLat:n,initialLon:s,outerBox:l}=e,i=(0,o.useRef)(null),a=(0,o.useRef)(),[c]=(0,o.useState)(s),[d]=(0,o.useState)(n),[u]=(0,o.useState)(13);return(0,o.useEffect)(()=>{if(a.current||!i.current)return;let e=new(h()).Map({container:i.current,style:"https://api.maptiler.com/maps/bright/style.json?key=UVAKtN0Z84SNZiFO1wFP",center:[c,d],zoom:u});a.current=e,e.addControl(new(h()).NavigationControl({}),"top-right"),e.setMaxBounds(l),t.map(t=>{let n=new(h()).Popup({offset:25}).setHTML("<h2>".concat(t.tags.name,"</h2>"));new(h()).Marker({color:"#FF0000"}).setLngLat([parseFloat(t.lon),parseFloat(t.lat)]).setPopup(n).addTo(e)})}),(0,r.jsx)("div",{className:"map-wrap",children:(0,r.jsx)("div",{ref:i,className:"map"})})},u=n(7421),p=n(6881);n(3931),p.kL.register(p.ST,p.jn,p.od,p.f$,p.Dx,p.u,p.FB,p.RM);var Components_EvolutionChart=e=>{let{data:t,title:n}=e,s={datasets:[{label:"Nombre d'elements",data:t.map(e=>({x:new Date(e.date),y:e.count})),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return(0,r.jsx)("div",{children:(0,r.jsx)(u.kL,{type:"line",data:s,options:{responsive:!0,scales:{y:{beginAtZero:!0,position:"left",ticks:{color:"white"},grid:{borderColor:"white",tickColor:"white",color:"#3a6ace"}},x:{type:"time",time:{unit:"day",format:"dd/MM/YY",tooltipFormat:"dd/MM/yyyy"},ticks:{color:"white"},grid:{borderColor:"white",tickColor:"white",color:"#3a6ace"}}},plugins:{legend:{display:!1},title:{display:!0,color:"white",text:n},tooltip:{enabled:!0}}}})})};p.kL.register(p.uw,p.jI,p.f$,p.qi,p.Dx,p.u,p.De);var Components_ContributorsChart=e=>{let{data:t,title:n,dataType:s}=e,l={labels:t.map(e=>e.username),datasets:[{label:"Contributions",data:t.map(e=>e.count),backgroundColor:["#0074D9","#FF4136","#2ECC40","#FF851B","#7FDBFF","#B10DC9","#FFDC00","#001f3f","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111","#AAAAAA"]}]};return(0,r.jsx)("div",{children:(0,r.jsx)(u.kL,{type:"doughnut",data:l,options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"white"}},title:{display:!0,text:n,color:"white"}}}})})},x=n(9669),m=!0,_type_=e=>{let t,{city:n,items:s,history:i,listDefinition:a,contributors:o}=e;return t="School"==a.component?(0,r.jsx)(Components_SchoolList,{items:s}):"Restaurant"==a.component?(0,r.jsx)(Components_RestaurantList,{items:s}):(0,r.jsx)(Components_GenericList,{items:s,...a.props}),(0,r.jsxs)("div",{className:"page-container",children:[(0,r.jsx)(x.Z,{title:"".concat(a.name," \xe0 ").concat(n.name),description:"Tout sur ".concat(n.name)}),(0,r.jsxs)("h1",{className:"category",children:[(0,r.jsx)(l(),{href:"/",children:"\xab"})," ",a.name," \xe0 ",n.name]}),(0,r.jsxs)("div",{className:"category-head",children:["Liste des ",s.length," elements de la ville de ",n.name," d'apr\xe8s les donn\xe9es de la carte collaborative OpenStreetMap. En cas d'erreur ou d'omission, il suffit de cliquer sur l'ic\xf4ne en d\xe9but de ligne pour modifier ce qui doit l'\xeatre… Les \xe9lements selection\xe9s ici portent l'attribut ",(0,r.jsx)("code",{children:a.tags})]}),t,(0,r.jsx)(Components_Map,{items:s,initialLat:n.center.lat,initialLon:n.center.lon,outerBox:n.bbox}),(0,r.jsxs)("div",{className:"charts-container",children:[(0,r.jsx)(Components_ContributorsChart,{data:o,title:"Contributeurs sur OpenStreetMap",dataType:a.name}),(0,r.jsx)(Components_EvolutionChart,{data:i,title:"".concat(a.name," \xe0 ").concat(n.name," encod\xe9s sur Openstreetmap")})]}),(0,r.jsxs)("footer",{children:["Les tableaux et les cartes ci-dessus sont g\xe9n\xe9r\xe9s a partir de la base de donn\xe9es collaborative OpenStreetMap. Compl\xe9ter les donn\xe9es d'Openstreetmap c'est aussi am\xe9liorer ces listes.",(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://github.com/eMerzh/labas",children:"https://github.com/eMerzh/labas"})]})]})}}},function(e){e.O(0,[100,747,805,429,776,774,888,179],function(){return e(e.s=373)}),_N_E=e.O()}]);