(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{186:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list/[city]/[type]",function(){return r(9519)}])},9519:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return F},default:function(){return k}});var n=r(1527),s=r(7806),a=r.n(s),l=r(8470),i=r.n(l),o=r(959);function c(e){let t=e.tags.website;return t?(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:new URL(t).hostname}):null}function d(e){return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)("a",{href:"https://www.openstreetmap.org/".concat(e.type,"/").concat(e.osm_id),target:"_blank",rel:"noreferrer",children:"\uD83D\uDDFA"}),(0,n.jsx)("a",{href:"https://www.openstreetmap.org/edit?".concat(e.type,"=").concat(e.osm_id),target:"_blank",rel:"noreferrer",children:"✍️"})]})}function h(e){return"".concat(e.tags["addr:street"]||""," ").concat(e.tags["addr:housenumber"]||"")}function u(e){return e.tags["addr:postcode"]}function p(e){if(!e.tags.opening_hours)return null;try{let t=new(i())(e.tags.opening_hours,{lat:parseInt(e.lat,10),lon:parseInt(e.lon,10),address:{country_code:"be",state:""}}).getStateString();if("open"===t)return(0,n.jsx)("span",{className:"opening open",children:"Ouvert"});if(["closed","close"].includes(t))return(0,n.jsx)("span",{className:"opening closed",children:"Ferm\xe9"})}catch(e){return console.warn(e),null}}var x=function(e){let{items:t,withOpening:r=!1}=e;return(0,n.jsxs)("table",{className:"table-fill",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Nom"}),(0,n.jsx)("th",{children:"Adresse"}),(0,n.jsx)("th",{children:"CP"}),(0,n.jsx)("th",{children:"Web"}),r?(0,n.jsx)("th",{children:"Ouvert ?"}):null]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:d(e)}),(0,n.jsx)("td",{children:null===(t=e.tags)||void 0===t?void 0:t.name}),(0,n.jsx)("td",{children:h(e)}),(0,n.jsx)("td",{children:u(e)}),(0,n.jsx)("td",{children:c(e)}),r?(0,n.jsx)("td",{children:p(e)}):null]},e.osm_id)})})]})};let j={elementary:"Maternelle",primary:"Primaire",secondary:"Secondaire",0:"Maternelle",1:"Primaire",2:"Secondaire",3:"Secondaire Sup\xe9rieur"};var m=function(e){let{items:t}=e;return(0,n.jsxs)("table",{className:"table-fill",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Nom"}),(0,n.jsx)("th",{children:"Adresse"}),(0,n.jsx)("th",{children:"CP"}),(0,n.jsx)("th",{children:"Niveau"}),(0,n.jsx)("th",{children:"Web"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;let r=null===(t=e.tags["ref:fase"])||void 0===t?void 0:t.split("/")[0];return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:d(e)}),(0,n.jsxs)("td",{children:[e.tags.name,e.tags["ref:fase"]&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsxs)("a",{href:"http://www.enseignement.be/index.php?page=24797&etab_id=".concat(r),className:"text-muted",children:["Fase: ",e.tags["ref:fase"]]})]})]}),(0,n.jsx)("td",{children:h(e)}),(0,n.jsx)("td",{children:u(e)}),(0,n.jsx)("td",{children:function(e){let t=e.tags.school||e.tags["isced:level"];if(t)return t.split(";").map(e=>{var t;return(0,n.jsx)("span",{className:"tag",children:null!==(t=j[e])&&void 0!==t?t:e},"level")})}(e)}),(0,n.jsx)("td",{children:c(e)})]},e.osm_id)})})]})},f=function(e){let{items:t}=e;return(0,n.jsxs)("table",{className:"table-fill",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Nom"}),(0,n.jsx)("th",{children:"Adresse"}),(0,n.jsx)("th",{children:"CP"}),(0,n.jsx)("th",{children:"Web"}),(0,n.jsx)("th",{children:"Cuisine"}),(0,n.jsx)("th",{children:"Ouvert ?"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:d(e)}),(0,n.jsx)("td",{children:null===(t=e.tags)||void 0===t?void 0:t.name}),(0,n.jsx)("td",{children:h(e)}),(0,n.jsx)("td",{children:u(e)}),(0,n.jsx)("td",{children:c(e)}),(0,n.jsx)("td",{children:function(e){let t=e.tags.cuisine;return t?t.split(";").map(e=>(0,n.jsx)("span",{className:"tag",children:e},"cuisine")):null}(e)}),(0,n.jsx)("td",{children:p(e)})]},e.osm_id)})})]})},g=r(8974),b=r.n(g);r(6027);var v=e=>{let{items:t,initialLat:r,initialLon:s,outerBox:a}=e,l=(0,o.useRef)(null),i=(0,o.useRef)(),[c]=(0,o.useState)(s),[d]=(0,o.useState)(r),[h]=(0,o.useState)(13);return(0,o.useEffect)(()=>{if(i.current||!l.current)return;let e=new(b()).Map({container:l.current,style:"https://api.maptiler.com/maps/bright/style.json?key=UVAKtN0Z84SNZiFO1wFP",center:[c,d],zoom:h});i.current=e,e.addControl(new(b()).NavigationControl({}),"top-right"),e.setMaxBounds(a),t.map(t=>{let r=new(b()).Popup({offset:25}).setHTML("<h2>".concat(t.tags.name,"</h2>"));new(b()).Marker({color:"#FF0000"}).setLngLat([parseFloat(t.lon),parseFloat(t.lat)]).setPopup(r).addTo(e)})}),(0,n.jsx)("div",{className:"map-wrap",children:(0,n.jsx)("div",{ref:l,className:"map"})})},w=r(9114),y=r(4936);r(4456),y.kL.register(y.ST,y.jn,y.od,y.f$,y.Dx,y.u,y.FB,y.RM);var N=e=>{let{data:t,title:r}=e,s={datasets:[{label:"Nombre d'elements",data:t.map(e=>({x:new Date(e.date),y:e.count})),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return(0,n.jsx)("div",{children:(0,n.jsx)(w.kL,{type:"line",data:s,options:{responsive:!0,scales:{y:{beginAtZero:!0,position:"left",ticks:{color:"white"},grid:{borderColor:"white",tickColor:"white",color:"#3a6ace"}},x:{type:"time",time:{unit:"day",format:"dd/MM/YY",tooltipFormat:"dd/MM/yyyy"},ticks:{color:"white"},grid:{borderColor:"white",tickColor:"white",color:"#3a6ace"}}},plugins:{legend:{display:!1},title:{display:!0,color:"white",text:r},tooltip:{enabled:!0}}}})})};y.kL.register(y.uw,y.jI,y.f$,y.qi,y.Dx,y.u,y.De);var _=e=>{let{data:t,title:r,dataType:s}=e,a={labels:t.map(e=>e.username),datasets:[{label:"Contributions",data:t.map(e=>e.count),backgroundColor:["#0074D9","#FF4136","#2ECC40","#FF851B","#7FDBFF","#B10DC9","#FFDC00","#001f3f","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111","#AAAAAA"]}]};return(0,n.jsx)("div",{children:(0,n.jsx)(w.kL,{type:"doughnut",data:a,options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"white"}},title:{display:!0,text:r,color:"white"}}}})})},C=r(2027),F=!0,k=e=>{let t,{city:r,items:s,history:l,listDefinition:i,contributors:o}=e;return t="School"==i.component?(0,n.jsx)(m,{items:s}):"Restaurant"==i.component?(0,n.jsx)(f,{items:s}):(0,n.jsx)(x,{items:s,...i.props}),(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsx)(C.Z,{title:"".concat(i.name," \xe0 ").concat(r.name),description:"Tout sur ".concat(r.name)}),(0,n.jsxs)("h1",{className:"category",children:[(0,n.jsx)(a(),{href:"/",children:"\xab"})," ",i.name," \xe0 ",r.name]}),(0,n.jsxs)("div",{className:"category-head",children:["Liste des ",s.length," elements de la ville de ",r.name," d'apr\xe8s les donn\xe9es de la carte collaborative OpenStreetMap. En cas d'erreur ou d'omission, il suffit de cliquer sur l'ic\xf4ne en d\xe9but de ligne pour modifier ce qui doit l'\xeatre… Les \xe9lements selection\xe9s ici portent l'attribut ",(0,n.jsx)("code",{children:i.tags})]}),t,(0,n.jsx)(v,{items:s,initialLat:r.center.lat,initialLon:r.center.lon,outerBox:r.bbox}),(0,n.jsxs)("div",{className:"charts-container",children:[(0,n.jsx)(_,{data:o,title:"Contributeurs sur OpenStreetMap",dataType:i.name}),(0,n.jsx)(N,{data:l,title:"".concat(i.name," \xe0 ").concat(r.name," encod\xe9s sur Openstreetmap")})]}),(0,n.jsxs)("footer",{children:["Les tableaux et les cartes ci-dessus sont g\xe9n\xe9r\xe9s a partir de la base de donn\xe9es collaborative OpenStreetMap. Compl\xe9ter les donn\xe9es d'Openstreetmap c'est aussi am\xe9liorer ces listes.",(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"https://github.com/eMerzh/labas",children:"https://github.com/eMerzh/labas"})]})]})}}},function(e){e.O(0,[772,521,805,806,850,888,774,179],function(){return e(e.s=186)}),_N_E=e.O()}]);