(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{4496:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list/[city]/[type]",function(){return r(7742)}])},7742:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return F},default:function(){return k}});var n=r(2822),s=r(7965),a=r.n(s),l=r(7843),i=r(8994);r(3282),l.kL.register(l.uw,l.jI,l.f$,l.qi,l.Dx,l.u,l.De);var o=e=>{let{data:t,title:r}=e,s={labels:t.map(e=>e.username),datasets:[{label:"Contributions",data:t.map(e=>e.count),backgroundColor:["#0074D9","#FF4136","#2ECC40","#FF851B","#7FDBFF","#B10DC9","#FFDC00","#001f3f","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111","#AAAAAA"]}]};return(0,n.jsx)("div",{children:(0,n.jsx)(i.kL,{type:"doughnut",data:s,options:{responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"white"}},title:{display:!0,text:r,color:"white"}}}})})};l.kL.register(l.ST,l.jn,l.od,l.f$,l.Dx,l.u,l.FB,l.RM);var c=e=>{let{data:t,title:r}=e,s={datasets:[{label:"Nombre d'elements",data:t.map(e=>({x:new Date(e.date),y:e.count})),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return(0,n.jsx)("div",{children:(0,n.jsx)(i.kL,{type:"line",data:s,options:{responsive:!0,scales:{y:{beginAtZero:!0,position:"left",ticks:{color:"white"},grid:{borderColor:"white",tickColor:"white",color:"#3a6ace"}},x:{type:"time",time:{unit:"day",format:"dd/MM/YY",tooltipFormat:"dd/MM/yyyy"},ticks:{color:"white"},grid:{borderColor:"white",tickColor:"white",color:"#3a6ace"}}},plugins:{legend:{display:!1},title:{display:!0,color:"white",text:r},tooltip:{enabled:!0}}}})})},d=r(2321),h=r.n(d),u=r(6719);function p(e){let t=e.tags.website;return t?(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:new URL(t).hostname}):null}function x(e){return(0,n.jsxs)(u.Fragment,{children:[(0,n.jsx)("a",{href:"https://www.openstreetmap.org/".concat(e.type,"/").concat(e.osm_id),target:"_blank",rel:"noreferrer",children:"\uD83D\uDDFA"}),(0,n.jsx)("a",{href:"https://www.openstreetmap.org/edit?".concat(e.type,"=").concat(e.osm_id),target:"_blank",rel:"noreferrer",children:"✍️"})]})}function j(e){return"".concat(e.tags["addr:street"]||""," ").concat(e.tags["addr:housenumber"]||"")}function m(e){return e.tags["addr:postcode"]}function f(e){if(!e.tags.opening_hours)return null;try{let t=new(h())(e.tags.opening_hours,{lat:Number.parseInt(e.lat,10),lon:Number.parseInt(e.lon,10),address:{country_code:"be",state:""}}).getStateString();if("open"===t)return(0,n.jsx)("span",{className:"opening open",children:"Ouvert"});if(["closed","close"].includes(t))return(0,n.jsx)("span",{className:"opening closed",children:"Ferm\xe9"})}catch(e){return console.warn(e),null}}var g=function(e){let{items:t,withOpening:r=!1}=e;return(0,n.jsxs)("table",{className:"table-fill",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Nom"}),(0,n.jsx)("th",{children:"Adresse"}),(0,n.jsx)("th",{children:"CP"}),(0,n.jsx)("th",{children:"Web"}),r?(0,n.jsx)("th",{children:"Ouvert ?"}):null]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:x(e)}),(0,n.jsx)("td",{children:null===(t=e.tags)||void 0===t?void 0:t.name}),(0,n.jsx)("td",{children:j(e)}),(0,n.jsx)("td",{children:m(e)}),(0,n.jsx)("td",{children:p(e)}),r?(0,n.jsx)("td",{children:f(e)}):null]},e.osm_id)})})]})},b=r(6923),v=r(1402),w=r.n(v);r(2562);var N=e=>{let{items:t,initialLat:r,initialLon:s,outerBox:a}=e,l=(0,u.useRef)(null),i=(0,u.useRef)(null),[o]=(0,u.useState)(s),[c]=(0,u.useState)(r),[d]=(0,u.useState)(13);return(0,u.useEffect)(()=>{if(i.current||!l.current)return;let e=new(w()).Map({container:l.current,style:"https://api.maptiler.com/maps/bright/style.json?key=UVAKtN0Z84SNZiFO1wFP",center:[o,c],zoom:d});i.current=e,e.addControl(new(w()).NavigationControl({}),"top-right"),e.setMaxBounds(a),t.forEach(t=>{let r=new(w()).Popup({offset:25}).setHTML("<h2>".concat(t.tags.name,"</h2>"));new(w()).Marker({color:"#FF0000"}).setLngLat([Number.parseFloat(t.lon),Number.parseFloat(t.lat)]).setPopup(r).addTo(e)})}),(0,n.jsx)("div",{className:"map-wrap",children:(0,n.jsx)("div",{ref:l,className:"map"})})},y=function(e){let{items:t}=e;return(0,n.jsxs)("table",{className:"table-fill",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Nom"}),(0,n.jsx)("th",{children:"Adresse"}),(0,n.jsx)("th",{children:"CP"}),(0,n.jsx)("th",{children:"Web"}),(0,n.jsx)("th",{children:"Cuisine"}),(0,n.jsx)("th",{children:"Ouvert ?"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:x(e)}),(0,n.jsx)("td",{children:null===(t=e.tags)||void 0===t?void 0:t.name}),(0,n.jsx)("td",{children:j(e)}),(0,n.jsx)("td",{children:m(e)}),(0,n.jsx)("td",{children:p(e)}),(0,n.jsx)("td",{children:function(e){let t=e.tags.cuisine;return t?t.split(";").map(e=>(0,n.jsx)("span",{className:"tag",children:e},"cuisine")):null}(e)}),(0,n.jsx)("td",{children:f(e)})]},e.osm_id)})})]})};let _={elementary:"Maternelle",primary:"Primaire",secondary:"Secondaire",0:"Maternelle",1:"Primaire",2:"Secondaire",3:"Secondaire Sup\xe9rieur"};var C=function(e){let{items:t}=e;return(0,n.jsxs)("table",{className:"table-fill",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Nom"}),(0,n.jsx)("th",{children:"Adresse"}),(0,n.jsx)("th",{children:"CP"}),(0,n.jsx)("th",{children:"Niveau"}),(0,n.jsx)("th",{children:"Web"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;let r=null===(t=e.tags["ref:fase"])||void 0===t?void 0:t.split("/")[0];return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:x(e)}),(0,n.jsxs)("td",{children:[e.tags.name,e.tags["ref:fase"]&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsxs)("a",{href:"http://www.enseignement.be/index.php?page=24797&etab_id=".concat(r),className:"text-muted",children:["Fase: ",e.tags["ref:fase"]]})]})]}),(0,n.jsx)("td",{children:j(e)}),(0,n.jsx)("td",{children:m(e)}),(0,n.jsx)("td",{children:function(e){let t=e.tags.school||e.tags["isced:level"];if(t)return t.split(";").map(e=>{var t;return(0,n.jsx)("span",{className:"tag",children:null!==(t=_[e])&&void 0!==t?t:e},"level")})}(e)}),(0,n.jsx)("td",{children:p(e)})]},e.osm_id)})})]})},F=!0,k=e=>{let t,{city:r,items:s,history:l,listDefinition:i,contributors:d}=e;return t="School"===i.component?(0,n.jsx)(C,{items:s}):"Restaurant"===i.component?(0,n.jsx)(y,{items:s}):(0,n.jsx)(g,{items:s,...i.props}),(0,n.jsxs)("div",{className:"page-container",children:[(0,n.jsx)(b.Z,{title:"".concat(i.name," \xe0 ").concat(r.name),description:"Tout sur ".concat(r.name)}),(0,n.jsxs)("h1",{className:"category",children:[(0,n.jsx)(a(),{href:"/",children:"\xab"})," ",i.name," \xe0 ",r.name]}),(0,n.jsxs)("div",{className:"category-head",children:["Liste des ",s.length," elements de la ville de ",r.name," d'apr\xe8s les donn\xe9es de la carte collaborative OpenStreetMap. En cas d'erreur ou d'omission, il suffit de cliquer sur l'ic\xf4ne en d\xe9but de ligne pour modifier ce qui doit l'\xeatre… Les \xe9lements selection\xe9s ici portent l'attribut ",(0,n.jsx)("code",{children:i.tags})]}),t,(0,n.jsx)(N,{items:s,initialLat:r.center.lat,initialLon:r.center.lon,outerBox:r.bbox}),(0,n.jsxs)("div",{className:"charts-container",children:[(0,n.jsx)(o,{data:d,title:"Contributeurs sur OpenStreetMap"}),(0,n.jsx)(c,{data:l,title:"".concat(i.name," \xe0 ").concat(r.name," encod\xe9s sur Openstreetmap")})]}),(0,n.jsxs)("footer",{children:["Les tableaux et les cartes ci-dessus sont g\xe9n\xe9r\xe9s a partir de la base de donn\xe9es collaborative OpenStreetMap. Compl\xe9ter les donn\xe9es d'Openstreetmap c'est aussi am\xe9liorer ces listes.",(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"https://github.com/eMerzh/labas",children:"https://github.com/eMerzh/labas"})]})]})}}},function(e){e.O(0,[722,875,637,965,163,888,774,179],function(){return e(e.s=4496)}),_N_E=e.O()}]);